# 1. Apps, CLI Tools, and Fonts
brew install --cask iterm2
brew install --cask font-jetbrains-mono-nerd-font
brew install fzf thefuck bat fnm

# 2. Oh My Zsh & Plugins
# Install Oh My Zsh if not already present
if [ ! -d "$HOME/.oh-my-zsh" ]; then
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
fi

# Clone plugins
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting 2>/dev/null
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions 2>/dev/null

# 3. fzf setup
$(brew --prefix)/opt/fzf/install --all

# 4. Configure .zshrc
# Backup existing .zshrc
cp ~/.zshrc ~/.zshrc.bak

cat << 'EOF' > ~/.zshrc
# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Use Dracula theme (ensure you followed the previous step to link it)
ZSH_THEME="dracula"

# --- Plugin Config ---
plugins=(git zsh-syntax-highlighting zsh-autosuggestions)

source $ZSH/oh-my-zsh.sh

# Initialize Tools
eval $(thefuck --alias fix)
eval "$(fnm env --use-on-cd)"

# --- Aliases ---
alias cat="bat"
alias gs="git status"
alias ga="git add ."
alias gc="git commit -m"
alias c="code ."
alias ..="cd .."
EOF

source ~/.zshrc
echo "Ultimate Setup Complete! Please restart iTerm2 to apply changes."
